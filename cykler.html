<!DOCTYPE html>
<html lang="da">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="stylesheet" href="style.css">

    <header id="side_menu">
        <nav>
            <div id="menu_billede">
                <a href="forside_2.html">
                    <img src="images/KOGA_LYB_WHITE.svg" alt="logo_profil"></a>
            </div>
            <div id="menuknap">☰</div>
            <ul id="menu" class="hidden">
                <li><a href="cykler.html">cykler</a></li>
                <li><a href="blog.html">blog</a></li>
                <li><a href="om_os.html">om os</a></li>
                <li><a href="kontakt.html">kontakt</a></li>
            </ul>
        </nav>
    </header>
</head>

<body>

    <section id="splash_cykler">
        <div class="cykler_tekst">
            <div class="cykler_tekst_boks">
                <h1>Cykler</h1>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Possimus molestias blanditiis deleniti minus veritatis, nam, quisquam est provident porro, ullam nostrum error reprehenderit, omnis ex dicta nisi totam impedit illo.</p>
            </div>
        </div>
    </section>

    <main>
        <section class="liste">
        </section>
    </main>

    <template id="temp">
        <article class="article_cykel cykelside">
            <img class="front_billede" src="">
            <h2 class="navn"></h2>
            <p class="kort"></p>
            <p class="pris"></p>
        </article>
    </template>

    <footer id="footer">
        <div class="sectionwrapper">
            <div class="col">
                <div class="top">
                    <h2>Kontakt</h2>
                    <div class="icons icon_flex">
                        <img src="icons/place.svg" alt="Location">
                        <div>
                            <p>Peter Bangsvej 18</p>
                            <p>2000 Frederiksberg</p>
                        </div>
                    </div>
                    <div class="icons icon_flex">
                        <img src="icons/call-answer.svg" alt="Location">
                        <p class="align">+45 38 86 43 25</p>
                    </div>
                    <div class="icons icon_flex">
                        <img src="icons/email.svg" alt="Location">
                        <p class="align">info@kogacenter.dk</p>
                    </div>
                    <p></p>
                </div>
            </div>
            <div class="col">
                <div class="top">
                    <h2>KOGA</h2>
                    <div class="icons">
                        <img src="icons/facebook-logo.svg" alt="facebook">
                        <img src="icons/instagram.svg" alt="instagram">
                        <img src="icons/twitter.svg" alt="instagram">
                        <img src="icons/youtube.svg" alt="instagram">
                    </div>

                </div>
            </div>

            <div class="col">
                <div class="top">
                    <h2>Andet info</h2>
                    <p></p>
                </div>
            </div>
        </div>
    </footer>


    <script>
<<<<<<< HEAD
        //Det er vigtigt at man sætter "?per_page=100" efter sit link. Det er nemlig default, at den kun viser 10 pr. Side.
=======
        //"?per_page=100";" skal skrives efter linket. Ellers vises der kun 10, som er default
>>>>>>> origin/master
        const url = "https://uwei.eu/kea/2_semester/tema9/koga/wordpress/wp-json/wp/v2/cykler?per_page=100";
        let cykler = [];
        document.addEventListener("DOMContentLoaded", start);

        function start() {
            hentJson();
            console.log("sidenVises");

            document.querySelector("#menuknap").addEventListener("click", toggleMenu);
        }

        function toggleMenu() {
            console.log("toggleMenu");
            document.querySelector("#menu").classList.toggle("hidden");

            let erSkjult =
                document.querySelector("#menu").classList.contains("hidden");

            if (erSkjult == true) {
                document.querySelector("#menuknap").textContent = "☰";
            } else {
                document.querySelector("#menuknap").textContent = "X";
            }
        }

        function myFunction() {
            document.getElementById("myDropdown").classList.toggle("show");
        }


        // When the user scrolls the page, execute myFunction
        window.onscroll = function() {
            fastHeader()
        };

        // Get the header
        var header = document.getElementById("side_menu");

        // Get the offset position of the navbar
        var sticky = header.offsetTop;

        // Add the sticky class to the header when you reach its scroll position. Remove "sticky" when you leave the scroll position
        function fastHeader() {
            if (window.pageYOffset > sticky) {
                header.classList.add("sticky");
            } else {
                header.classList.remove("sticky");
            }
        }

        async function hentJson() {
            const response = await fetch(url);
            console.log(response);
            cykler = await response.json();
            console.log(cykler);
            vis();
        }

        function vis() {
            const skabelon = document.querySelector("template");
            const liste = document.querySelector(".liste");

            cykler.forEach(cykel => {
                console.log("loop okay");
                const klon = skabelon.cloneNode(true).content;
                klon.querySelector(".front_billede").src = cykel.front_billede.guid;
                klon.querySelector(".navn").textContent = cykel.title.rendered;
                klon.querySelector(".kort").textContent = cykel.kort;
                klon.querySelector(".pris").textContent = cykel.pris;

                klon.querySelector(".article_cykel").addEventListener("click", (() => {


                    window.location.href = "singlesite.html?id=" + cykel.id;
                }))

                liste.appendChild(klon);
            });
        }
    </script>

</body>

</html>
