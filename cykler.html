<!DOCTYPE html>
<html lang="da">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="stylesheet" href="style.css">

    <header id="side_menu">
        <nav>
            <div id="menu_billede">
                <a href="forside_2.html">
                    <img src="images/KOGA_LYB_WHITE.svg" alt="logo_profil"></a>
            </div>
            <div id="menuknap">â˜°</div>
            <ul id="menu" class="hidden">
                <li><a href="cykler.html">cykler</a></li>
                <li><a href="blog.html">blog</a></li>
                <li><a href="om_os.html">om os</a></li>
                <li><a href="kontakt.html">kontakt</a></li>
            </ul>
        </nav>
    </header>
</head>

<body>

    <section id="oversigt">
        <section class="kategori1"></section>
        <section class="kategori2"></section>
        <section class="kategori3"></section>
        <section class="kategori4"></section>
        <section class="kategori5"></section>
        <section class="kategori6"></section>
        <section class="kategori7"></section>
    </section>

    <main>
        <section class="liste">
            <h1 class="overskrift"></h1>
        </section>
    </main>

    <template>
        <article class="article_cykel cykelside">
            <h2 class="navn"></h2>
            <div class="kort"></div>
            <p class="pris"></p>
            <img class="front_billede" src="">
        </article>
        <section class="liste"></section>
    </template>


    <script>
        const url = "https://uwei.eu/kea/2_semester/tema9/koga/wordpress/wp-json/wp/v2/cykler";
        let cykler = [];
        document.addEventListener("DOMContentLoaded", start);

        function start() {
            hentJson();
        }

        async function hentJson() {
            const response = await fetch(url);
            console.log(response);
            cykler = await response.json();
            console.log(cykler);
            vis();
        }

        function vis() {
            const skabelon = document.querySelector("template");
            const liste = document.querySelector(".liste");

            cykler.forEach(cykel => {
                console.log("loop okay");
                const klon = skabelon.cloneNode(true).content;
                klon.querySelector(".navn").textContent = cykel.title.rendered;
                klon.querySelector(".kort").textContent = cykel.kort;
                klon.querySelector(".pris").textContent = cykel.pris;
                klon.querySelector(".front_billede").src = cykel.front_billede.guid;
                klon.querySelector(".article_cykel").addEventListener("click", (() => {


                    window.location.href = "singlesite.html?id=" + cykel.id;
                }))

                liste.appendChild(klon);
            });
        }

    </script>

</body>

</html>
