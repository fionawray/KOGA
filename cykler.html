<!DOCTYPE html>
<html lang="da">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="stylesheet" href="style.css">
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>

    <!--Favicon-->
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <!--Favicon slut -->

    <header class="header">
        <a href="index.html" class="logo">
            <img src="images/KOGA_LYB_WHITE.svg" alt="KOGA Logo"></a>
        <input class="menu-btn" type="checkbox" id="menu-btn" />
        <label class="menu-icon" for="menu-btn"><span class="navicon"></span></label>
        <ul class="menu">
            <li><a href="cykler.html">CYKLER</a></li>
            <li><a href="blog.html">BLOG</a></li>
            <li><a href="om_os.html">OM OS</a></li>
            <li><a href="kontakt.html">KONTAKT</a></li>
        </ul>
    </header>

</head>

<body>

    <section id="splash_cykler">

        <section class="forsidecitat">
            <div class="centered">
                <h2>
                    Hej
                </h2>
                <p>Kom ned i butikken og prøv en tur på vores cykler </p>
            </div>
            <div id="citat">
                <use xlink:href="#quite-icon"></use>
                <svg viewBox="-2 -2 23 19" id="quite-icon" xmlns="http://www.w3.org/2000/svg">
                    <title>“</title>
                    <path d="M2476.84167,1778.95 L2469.94167,1778.95 L2469.94167,1774.05 C2469.94167,1771.34999 2470.39166,1769.21667 2471.29167,1767.65 C2472.19167,1766.08333 2473.77499,1764.9 2476.04167,1764.1 L2477.39167,1766.95 C2474.79165,1767.78334 2473.49167,1769.49999 2473.49167,1772.1 L2476.84167,1772.1 L2476.84167,1778.95 Z M2486.59167,1779 L2479.69167,1779 L2479.69167,1774.1 C2479.69167,1771.39999 2480.14166,1769.26667 2481.04167,1767.7 C2481.94167,1766.13333 2483.52499,1764.95 2485.79167,1764.15 L2487.14167,1767 C2484.54165,1767.83334 2483.24167,1769.54999 2483.24167,1772.15 L2486.59167,1772.15 L2486.59167,1779 Z" transform="translate(-2469 -1764)" fill="#ffffff" fill-rule="nonzero"></path>
                </svg>
                <p>
                    Én gang KOGA, altid KOGA
                </p>
                <p class="reviewer">
                    - Hvem der har sagt det haha
                </p>
            </div>


        </section>
    </section>

    <!--Filterknapperne der inddeler de forskellige møbler-->
    <div id="filternavbar">
        <nav class="filter_alle">
            <button class="filter valgt" data-kategori="alle">Alle</button>
        </nav>
        <nav>
            <div class="filter_cykler">
                <button class="filter" data-kategori="E-Bike">E-Bike</button>
                <button class="filter" data-kategori="Race">Race</button>
                <button class="filter" data-kategori="City Tour">City Tour</button>
                <button class="filter" data-kategori="Trekking">Trekking</button>
                <button class="filter" data-kategori="Mountain bike">Mountain bike</button>
            </div>
        </nav>
    </div>

    <main>
        <section class="liste">
        </section>
    </main>

    <template id="temp">
        <article class="article_cykel cykelside">
            <img class="front_billede" src="">
            <h2 class="navn"></h2>
            <p class="kort"></p>
            <p class="pris"></p>
        </article>
    </template>

    <footer id="footer">
        <div class="sectionwrapper">
            <div class="col col_with_padding">
                <h2>Kontakt</h2>
                <div class="icons icon_flex">
                    <div class="icon_block">
                        <i class="fas fa-map-marked-alt"></i>
                        <p>Peter Bangsvej</p>
                        <!--                        <p>2000 Frederiksberg</p>-->
                    </div>
                    <div class="icon_block">
                        <i class="fas fa-phone-alt"></i>
                        <p>+45 38 86 43 25</p>
                    </div>
                    <div class="icon_block">
                        <i class="fas fa-envelope"></i>
                        <p>info@kogacenter.dk</p>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="koga_logo">
                    <a href="index.html">
                        <img src="images/KOGA_LYB_WHITE.svg" alt="KOGA Logo"></a>
                </div>
                <div class="icons">
                    <i class="fab fa-facebook-f"></i>
                    <i class="fab fa-instagram"></i>
                    <i class="fab fa-twitter"></i>
                    <i class="fab fa-youtube"></i>
                </div>
            </div>
            <div class="col col_with_padding">
                <h2>Cykler</h2>
                <p>Elcykler</p>
                <p>City</p>
                <p>Trekking</p>
                <p>Rave</p>
                <p>KOGA Signature</p>
            </div>
        </div>
    </footer>


    <script>
        //Det er vigtigt at man sætter "?per_page=100" efter sit link. Det er nemlig default, at den kun viser 10 pr. Side.
        let filterKategori = "alle";
        const url = "https://uwei.eu/kea/2_semester/tema9/koga/wordpress/wp-json/wp/v2/cykler?per_page=100";
        let cykler = [];
        document.addEventListener("DOMContentLoaded", start);

        function start() {
            hentJson();
            console.log("sidenVises");

            document.querySelector("#menuknap").addEventListener("click", toggleMenu);
        }

        function toggleMenu() {
            console.log("toggleMenu");
            document.querySelector("#menu").classList.toggle("hidden");

            let erSkjult =
                document.querySelector("#menu").classList.contains("hidden");

            if (erSkjult == true) {
                document.querySelector("#menuknap").textContent = "☰";
            } else {
                document.querySelector("#menuknap").textContent = "X";
            }
        }

        function myFunction() {
            document.getElementById("myDropdown").classList.toggle("show");
        }


        // When the user scrolls the page, execute myFunction
        window.onscroll = function() {
            fastHeader()
        };

        // Get the header
        var header = document.getElementById("side_menu");

        // Get the offset position of the navbar
        var sticky = header.offsetTop;

        // Add the sticky class to the header when you reach its scroll position. Remove "sticky" when you leave the scroll position
        function fastHeader() {
            if (window.pageYOffset > sticky) {
                header.classList.add("sticky");
            } else {
                header.classList.remove("sticky");
            }
        }

        async function hentJson() {
            const response = await fetch(url);
            console.log(response);
            cykler = await response.json();
            console.log(cykler);
            vis();
            addEventListenersToButtons();
        }

        function vis() {
            const skabelon = document.querySelector("template");
            const liste = document.querySelector(".liste");

            //containeren bliver tømt eller nulstillet.
            liste.innerHTML = "";
            console.log("filterKategori", filterKategori);
            cykler.forEach(cykel => {

                if (filterKategori == "alle" || filterKategori == cykel.kategori) {
                    const klon = skabelon.cloneNode(true).content;
                    klon.querySelector(".navn").textContent = cykel.title.rendered;
                    klon.querySelector(".kort").textContent = cykel.kort;
                    klon.querySelector(".pris").textContent = cykel.pris;
                    klon.querySelector(".front_billede").src = cykel.front_billede.guid;
                    liste.appendChild(klon);

                    liste.lastElementChild.addEventListener("click", () => {
                        window.location.href = "singlesite.html?id=" + cykel.id;
                    });
                }
            })
        }


        function addEventListenersToButtons() {
            //Hvis varer knapperne ".filter" bliver trykket på, bliver filtrering () kaldt.
            //Hvis pris knapperne ".filter-prisklasse" bliver trykket på, bliver filtreringPrisklasse () kaldt.
            document.querySelectorAll(".filter").forEach(elm => {
                elm.addEventListener("click", filtrering);
                elm.addEventListener("mouseenter", enterfunction);
            })
        }

        function filtrering() {
            filterKategori = this.dataset.kategori;
            //Hvis filteret er "alle", så skal ".valgt" class'en være tilføjet til alle.
            //Hvis filteret er et på sorteringsfilteret ".filter", bliver ".valgt" fjernet fra "alle" og sat på ".filter" istedet.
            console.log();
            document.querySelectorAll(".filter").forEach(elm => {
                elm.classList.remove("valgt");
                elm.style.backgroundColor = "#172334";
                elm.style.color = "white";
            });
            this.classList.add("valgt");
            this.style.backgroundColor = "#f1f1f1";
            this.style.color = "black";
            //vis () kaldes.
            vis();
        }

        function enterfunction() {

            document.querySelectorAll(".filter").forEach(elm => {
                console.log();
                if (!elm.classList.contains("valgt")) {
                    elm.style.backgroundColor = "#172334";
                    elm.style.color = "white";
                }
            });
            this.style.backgroundColor = "#f1f1f1";
            this.style.color = "black";
        }

    </script>

</body>

</html>
